import{u as w}from"./BHMYmoF_.js";import{f as g,g as v,h as k,r as j,u as r,o as l,c as d,a as t,t as a,F as C,i as $,b as h,w as u,j as I,k as N,l as S,v as V,d as x}from"./ClK1P5_w.js";import{u as F}from"./DOXMt9Mp.js";import{i as _}from"./DKu95BBG.js";const T={key:0,class:"container mx-auto"},P={class:"flex flex-wrap my-4 shadow-md"},O={class:"bg-white p-4 sm:p-10 sm:w-3/4"},B={class:"border-b flex justify-between pb-8"},D=t("h1",{class:"font-semibold text-2xl"},"Iepirkumu grozs",-1),U={class:"font-semibold text-2xl"},A=N('<div class="flex mb-5 mt-10"><h3 class="font-semibold text-gray-600 text-xs uppercase w-2/5"> Produkts </h3><h3 class="font-semibold text-center text-gray-600 text-xs uppercase w-1/5"> Skaits </h3><h3 class="font-semibold text-center text-gray-600 text-xs uppercase w-1/5"> Cena </h3><h3 class="font-semibold text-center text-gray-600 text-xs uppercase w-1/5"> Kopā </h3><h3 class="font-semibold text-center text-gray-600 text-xs uppercase w-1/5"> Noņemt </h3></div>',1),E={class:"flex w-2/5"},J={class:"hidden sm:block w-20"},K=["alt","src"],L={class:"flex flex-col flex-grow justify-between ml-4"},R={class:"font-bold text-sm"},z={class:"text-gray-500 text-xs"},G={class:"w-1/5"},H=["onUpdate:modelValue"],M=["onClick"],Y={class:"font-semibold text-center text-sm w-1/5"},q={class:"font-semibold text-center text-sm w-1/5"},Q=["onClick"],W={id:"summary",class:"px-8 py-10 sm:w-1/4"},X=t("h1",{class:"border-b font-semibold pb-8 text-2xl"}," Pasūtījuma pārskats ",-1),Z={class:"flex justify-between mb-5 mt-10"},tt={class:"font-semibold text-sm uppercase"},et={class:"font-semibold text-sm"},st={class:"flex gap-2 py-10"},it=g({__name:"cart",async setup(ot){let n,p;const{data:s,refresh:f}=([n,p]=v(()=>w("/cart",{baseURL:"https://thesis-project.local.io/api/json"},"$tF04VGYwkR")),n=await n,p(),n);k(()=>{s.value&&F({title:s.value.metadata.title,meta:[{name:"description",content:s.value.metadata.metaDescription},{name:"keywords",content:s.value.metadata.metaKeywords}]})});const b=async c=>{try{const o=await $fetch("https://thesis-project.local.io/api/json/update-cart-item",{method:"POST",body:JSON.stringify({cartItemId:c.id,amount:c.amount}),headers:{"Content-Type":"application/json"}});_.success(o.message)}catch(o){console.error(o)}},y=async c=>{try{const o=await $fetch("https://thesis-project.local.io/api/json/remove-cart-item",{method:"POST",body:JSON.stringify({cartItemId:c}),headers:{"Content-Type":"application/json"}});_.success(o.message),await f()}catch(o){console.error(o)}};return(c,o)=>{const m=j("router-link");return r(s)?(l(),d("div",T,[t("div",P,[t("div",O,[t("div",B,[D,t("h2",U,a(r(s).order.orderItems.length)+" produkti ",1)]),A,(l(!0),d(C,null,$(r(s).order.orderItems,e=>(l(),d("div",{key:e.id,class:"-mx-8 flex hover:bg-gray-100 items-center px-2 py-1.5 sm:px-6 sm:py-5"},[t("div",E,[t("div",J,[t("img",{alt:e.product.title,class:"h-24",src:e.product.images[0]},null,8,K)]),t("div",L,[t("span",R,a(e.product.title),1),t("span",z,a(e.product.category.name),1)])]),t("div",G,[S(t("input",{"onUpdate:modelValue":i=>e.amount=i,class:"mx-2 text-center w-8",min:"1",type:"number"},null,8,H),[[V,e.amount,void 0,{number:!0}]]),t("button",{class:"hover:text-purple-500 text-gray-600 transform",onClick:i=>b(e)}," Saglabāt ",8,M)]),t("span",Y,"$"+a(e.product.price),1),t("span",q,"$"+a((e.amount*parseFloat(e.product.price)).toFixed(2)),1),t("button",{class:"hover:scale-110 transform w-4",onClick:i=>y(e.id)}," ❌ ",8,Q)]))),128))]),t("div",W,[X,t("div",Z,[t("span",tt,a(r(s).order.orderItems.length)+" produkti",1),t("span",et,"$"+a(r(s).order.totalPrice.toFixed(2)),1)]),t("div",st,[h(m,{class:"bg-gray-500 hover:bg-gray-600 px-5 py-2 text-sm text-white uppercase",to:"/catalogue"},{default:u(()=>[x(" Turpināt iepirkties ")]),_:1}),h(m,{class:"bg-purple-500 hover:bg-purple-600 px-5 py-2 text-sm text-white uppercase",to:{name:"checkout"}},{default:u(()=>[x(" Apmaksāt pasūtījumu ")]),_:1})])])])])):I("",!0)}}});export{it as default};
